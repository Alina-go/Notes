name: Build-Notes

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: self-hosted
    defaults:
      run:
        shell: cmd    

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2

      - name: Building
        run: | 
           rmdir /s /q C:\Notes\Build
           mkdir C:\Notes\Build
           cd C:\Notes\Build
           C:\Notes\build.bat
           
      - name: Run Tests
        run: |
          echo Run Tests.exe
          C:\Notes\Build\Tests\debug\Tests.exe
          
      - name: Run Notes
        run: |  
          echo Run Notes.exe
          C:\Notes\Build\Notes\debug\Notes.exe
        
      - name: Run Lackey
        run: C:\Notes\Notes\GUITests\lackey_test.py
                
      - name: Building completed
        run: echo Ð¡ompilation is successful      
    
